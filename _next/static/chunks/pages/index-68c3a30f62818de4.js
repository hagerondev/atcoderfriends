(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3678)}])},3678:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(4051),s=n.n(r),a=n(5893),c=(n(9008),n(1163)),o=n(1664),i=n(3328),l=n(5376),d=n(7294);n(3461);function u(e,t,n,r,s,a,c){try{var o=e[a](c),i=o.value}catch(l){return void n(l)}o.done?t(i):Promise.resolve(i).then(r,s)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function c(e){u(a,r,s,c,o,"next",e)}function o(e){u(a,r,s,c,o,"throw",e)}c(void 0)}))}}i.kL.register(i.qi,i.u,i.De);var x={};function p(){return(p=h(s().mark((function e(t,n){var r,c,i,l,d,u,h,p,f,v,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",null);case 2:r=t.split(","),c=!0,i=!1,l=void 0,e.prev=4,d=r[Symbol.iterator]();case 6:if(c=(u=d.next()).done){e.next=23;break}return h=u.value,p="https://kyopro-ratings.herokuapp.com/json?atcoder="+h,console.log(p),e.next=12,fetch(p);case 12:return f=e.sent,e.next=15,f.json();case 15:return v=e.sent,m=v.atcoder.color,x[h]=m,e.next=20,new Promise((function(e){return setTimeout(e,300)}));case 20:c=!0,e.next=6;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(4),i=!0,l=e.t0;case 29:e.prev=29,e.prev=30,c||null==d.return||d.return();case 32:if(e.prev=32,!i){e.next=35;break}throw l;case 35:return e.finish(32);case 36:return e.finish(29);case 37:n((0,a.jsxs)("div",{className:"text-center text-lg lg:text-xl",children:[(0,a.jsx)("div",{children:"\u53c2\u52a0\u8005"}),(0,a.jsx)("div",{children:Object.keys(x).map((function(e){var t=x[e];return(0,a.jsx)(o.default,{href:"https://atcoder.jp/users/"+e,children:(0,a.jsx)("a",{className:"mx-2 hover:underline",style:{color:t},children:e})},e+t)}))})]}));case 38:case"end":return e.stop()}}),e,null,[[4,25,29,37],[30,,32,36]])})))).apply(this,arguments)}function f(e){var t={};t.labels=e,t.datasets=[{}],t.datasets[0].label="# of Votes",t.datasets[0].backgroundColor=[],t.datasets[0].borderColor=[];var n=!0,r=!1,s=void 0;try{for(var a,c=[[255,99,132],[54,162,235],[255,206,86],[75,192,192],[153,102,255],[255,159,64]][Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var o=a.value;t.datasets[0].backgroundColor.push("rgba(".concat(o[0],",").concat(o[1],",").concat(o[2],",0.5)")),t.datasets[0].borderColor.push("rgba(".concat(o[0],",").concat(o[1],",").concat(o[2],",1)"))}}catch(i){r=!0,s=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw s}}return t.datasets[0].borderWidth=1,t}var v=function(e){var t=new Date(1e3*e);return t.toLocaleDateString()+"\n"+t.toLocaleTimeString()};function m(e,t){return b.apply(this,arguments)}function b(){return(b=h(s().mark((function e(t,n){var r,a,c,o,i,l,d,u,h,x,p,f,v,m,b,j,g,_,N,k,y=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>2&&void 0!==y[2]?y[2]:-1,a=y.length>3&&void 0!==y[3]?y[3]:-1,void 0!==t){e.next=3;break}return e.abrupt("return",null);case 3:console.log("get_data start",t),-1==a&&(a=(new Date).getTime()/1e3),c={labels:[],point_data:[],cnt_data:[]},o=[],i=!0,l=!1,d=void 0,e.prev=8,u=t.split(",")[Symbol.iterator]();case 10:if(i=(h=u.next()).done){e.next=54;break}return x=h.value,p="https://kenkoooo.com/atcoder/atcoder-api/v3/user/submissions?user=".concat(x,"&from_second=").concat(r),console.log(p),e.next=16,fetch(p);case 16:return f=e.sent,e.next=19,f.json();case 19:for(v=e.sent,c.labels.push(x),m=0,0,b=!0,j=!1,g=void 0,e.prev=24,_=v[Symbol.iterator]();!(b=(N=_.next()).done);b=!0)(k=N.value).epoch_second<=a&&"AC"===k.result&&(k.point%10===0&&k.point<=5e3||-1!==k.problem_id.indexOf("abc")||-1!==k.problem_id.indexOf("arc")||-1!==k.problem_id.indexOf("agc"))&&(m+=k.point,o.push(k));e.next=32;break;case 28:e.prev=28,e.t0=e.catch(24),j=!0,g=e.t0;case 32:e.prev=32,e.prev=33,b||null==_.return||_.return();case 35:if(e.prev=35,!j){e.next=38;break}throw g;case 38:return e.finish(35);case 39:return e.finish(32);case 40:if(c.point_data.push(m),c.cnt_data.push(v.length),console.log("request",x),t.split(",").length!==c.labels.length){e.next=49;break}return o.sort((function(e,t){return t.epoch_second-e.epoch_second})),c.hist=o,console.log("log",c),n(c),e.abrupt("return",c);case 49:return e.next=51,new Promise((function(e){return setTimeout(e,1e3)}));case 51:i=!0,e.next=10;break;case 54:e.next=60;break;case 56:e.prev=56,e.t1=e.catch(8),l=!0,d=e.t1;case 60:e.prev=60,e.prev=61,i||null==u.return||u.return();case 63:if(e.prev=63,!l){e.next=66;break}throw d;case 66:return e.finish(63);case 67:return e.finish(60);case 68:case"end":return e.stop()}}),e,null,[[8,56,60,68],[24,28,32,40],[33,,35,39],[61,,63,67]])})))).apply(this,arguments)}function j(){var e=(0,c.useRouter)().query,t=(0,d.useState)({}),n=t[0],r=t[1],s=(0,d.useState)(null),i=s[0],u=s[1],h=(0,d.useState)(null),b=h[0],j=h[1],g=(0,d.useState)(null),_=g[0],N=g[1],k=(0,d.useState)(-1),y=k[0],w=k[1];(0,d.useEffect)((function(){void 0!==n.hist&&0!==n.hist.length&&y!=n.hist[0].epoch_second?(console.log("new data"),w(n.hist[0].epoch_second)):console.log("latest")}),[n]),(0,d.useEffect)((function(){u(function(e){var t=f(e.labels);return t.datasets[0].data=e.point_data,console.log("point \u66f4\u65b0"),(0,a.jsx)(l.by,{data:t})}(n)),j(function(e){var t=f(e.labels);return t.datasets[0].data=e.cnt_data,(0,a.jsx)(l.by,{data:t})}(n)),N(function(e){if(void 0===e.hist)return null;var t=function(e){return e.split("_").slice(0,-1).join("_")},n=function(e){var t=e.split("_");return t.slice(0,-1).join("_")+"-"+t[t.length-1]};return(0,a.jsx)("tbody",{children:e.hist.map((function(e){return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"w-1/3 px-1",children:v(e.epoch_second)}),(0,a.jsx)("td",{className:"w-1/3 px-1",children:(0,a.jsx)(o.default,{href:"https://atcoder.jp/contests/".concat(t(e.problem_id),"/tasks/").concat(e.problem_id),children:(0,a.jsx)("a",{className:"hover:underline",children:n(e.problem_id.toUpperCase())})})}),(0,a.jsx)("td",{className:"w-1/3 px-1",children:(0,a.jsx)(o.default,{href:"https://atcoder.jp/contests/".concat(t(e.problem_id),"/submissions/").concat(e.id),children:(0,a.jsx)("a",{className:"hover:underline",style:{color:x[e.user_id]},children:e.user_id})})})]},e.id)}))})}(n))}),[y]),(0,d.useEffect)((function(){void 0!==e.friends&&(!function(e,t){p.apply(this,arguments)}(e.friends,P),m(e.friends,r,e.start,e.end),setInterval((function(){m(e.friends,r,e.start,e.end)}),1e4+1e3*e.friends.split(",").length))}),[e]);var S,C,E=(0,d.useState)(null),O=E[0],P=E[1];return(0,a.jsxs)("div",{className:"text-center mx-auto",children:[(0,a.jsx)("div",{className:"bg-white/95 fixed top-0 left-0 right-0 bottom-0 z-10"}),(0,a.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 z-0",style:{backgroundImage:"url(./atcoder.svg)"}}),(0,a.jsxs)("div",{className:"relative z-50 max-w-screen-sm mx-auto",children:[(0,a.jsx)("h1",{className:"text-center text-2xl lg:text-4xl mt-4 font-bold",children:"AtCoder Friends"}),e.contest?(0,a.jsxs)("h2",{className:"text-center text-2xl lg:text-3xl my-2",children:["\u300c",e.contest,"\u300d"]}):null,(0,a.jsx)("div",{className:"p-2 my-2",children:O}),(0,a.jsx)("div",{className:"p-2 my-2",children:(S=e.start,C=e.end,void 0===S||void 0===C?null:(0,a.jsxs)("div",{className:"text-center text-lg lg:text-xl",children:[(0,a.jsx)("div",{children:"\u671f\u9593"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:v(S)})," \uff5e ",(0,a.jsx)("span",{className:"inline-block",children:v(C)})]})]}))}),(0,a.jsxs)("div",{className:"lg:flex justify-center flex-row",children:[(0,a.jsxs)("div",{className:"border-gray-500 border-2 rounded-lg p-4 m-4 basis-160",children:[(0,a.jsx)("h2",{className:"text-center text-xl mb-2",children:"\u5408\u8a08\u5f97\u70b9"}),(0,a.jsx)("div",{className:"max-w-sm mx-auto",children:i})]}),(0,a.jsxs)("div",{className:"border-gray-500 border-2 rounded-lg p-4 m-4",children:[(0,a.jsx)("h2",{className:"text-center text-xl mb-2",children:"\u89e3\u3044\u305f\u554f\u984c\u6570"}),(0,a.jsx)("div",{className:"mx-auto max-w-sm",children:b})]})]}),(0,a.jsxs)("div",{className:"border-gray-500 border-2 rounded-lg p-4 m-4",children:[(0,a.jsx)("h2",{className:"text-center text-xl mb-2",children:"\u5c65\u6b74"}),(0,a.jsx)("table",{className:"mx-auto",children:_})]})]})]})}}},function(e){e.O(0,[570,890,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);